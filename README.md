# MassBreak – 一括破壊プラグイン

Minecraft Java Edition **1.21.11**（Paper サーバー）向けの一括破壊プラグインです。  
しゃがみながらブロックを壊すと、ツールごとに定めた範囲・ルールでまとめて採掘／伐採／収穫できます。  
ホワイトリストはツール別 YAML で管理し、**`/mbreload`** コマンドで即時リロードが可能です。

---

## 主な機能

| ツール | デフォルト動作 | 代表的な対象ブロック |
|-------|---------------|----------------------|
| **ピッケル** | 同種 3 × 3 × 3 ／鉱石 26 方向ベイン破壊 | 石・深層岩・各種鉱石・黒曜石 など |
| **斧** | 26 方向 BFS で立木まるごと伐採 | 原木・幹・巨大キノコ |
| **シャベル** | 同種 3 × 3 × 3 | 土・砂・砂利・雪 など |
| **クワ** | 完熟同種作物を 26 方向ベイン収穫／その他 3 × 3 × 3 | 葉・苔・シュルームライト・完熟作物 など |
| **ハサミ** | 同種 3 × 3 × 3 | 葉・ツタ・羊毛・クモの巣・ツツジ葉 など |

- **自動回収切替** … `/mbauto` で ON/OFF。ON ならドロップは直接プレイヤーのインベントリへ。
- **Sneak 中警告** … しゃがみ＋一括破壊 ON 時、赤太字の「注意：一括破壊オン」を常時表示。しゃがみ解除で即消去。
- **収納ブロック保護** … チェスト・樽・シュルカーボックス等は一括破壊の対象外（中身の消失を防止）。
- **OP 限定リロード** … `/mbreload` は OP または `massbreak.reload` 権限保持者のみ実行可能。

---

## インストール

1. リリース済み **JAR** をサーバーの `plugins/` フォルダーに配置
2. サーバーを起動（または `/reload`）
3. 初回起動で `plugins/MassBreak/` 以下にツール別 YAML が自動生成されます

---

## 設定ファイル（YAML）

```text
plugins/MassBreak/
├─ pickaxe.yml
├─ axe.yml
├─ shovel.yml
├─ hoe.yml
└─ shears.yml
```

```yaml
add:        # 追加したいブロック
  - SHROOMLIGHT
  - HAY_BLOCK
remove:     # デフォルトリストから除外したいブロック
  - GRANITE
```

---

## コマンド

| コマンド       | 機能                       | 権限                               |
|----------------|----------------------------|------------------------------------|
| `/mbtoggle`    | 一括破壊モードの ON / OFF | すべてのプレイヤー                 |
| `/mbauto`      | 自動回収モードの ON / OFF | すべてのプレイヤー                 |
| `/mb setup`    | クリック GUI で ON / OFF を切替 | すべてのプレイヤー                 |
| `/mbreload`    | YAML 設定のリロード        | `massbreak.reload`（デフォルト OP） |

---

## ビルド

```bash
./gradlew build
```

生成された JAR は `build/libs/` に出力されます。

---

## 依存ライブラリ

- [CustomBlockData](https://github.com/JEFF-Media-GbR/CustomBlockData) – ブロックへの PDC 保存

---

## ライセンス

MIT License
